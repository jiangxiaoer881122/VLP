#include <stdio.h>
#include <stdint.h>
int main()
{
    //用于解析数据包是否是对的问题
    unsigned char num[]={0xDC, 0xBA, 0x1F, 0x44, 0x00, 0x05, 0xC4, 0x61, 0xD8, 0xA5, 0x35, 0x50, 0x40, };
    // printf("this is \n");
    int time[10];
    int i=0;
    int a=0;
    // for(i=0;i<5;i++)
    // {

    // }
    //时间戳解析
    //总的10位被拆成了什么 ：8+2(高)
    time[0]=(num[0]<<2)|(num[1]>>6);
    //6（低）+4（高)
    time[1]=((num[1]&0x3F)<<4)|((num[2]>>4)&0x0F);
    //4（低）+6（高）
    time[2]=((num[2]&0x0F)<<6)|((num[3]>>2)&0x3F);
    //2(低)+8（高）
    time[3]=((num[3]&0x03)<<8)|num[4];
    //第二组
    a=5;
    time[0+a-1]=(num[0+a]<<2)|(num[1+a]>>6);
    //6（低）+4（高)
    time[1+a-1]=((num[1+a]&0x3F)<<4)|((num[2+a]>>4)&0x0F);
    //4（低）+6（高）
    time[2+a-1]=((num[2+a]&0x0F)<<6)|((num[3+a]>>2)&0x3F);
    //2(低)+8（高）
    time[3+a-1]=((num[3+a]&0x03)<<8)|num[4+a];
    
    //第三组
    a=a+5;
    time[0+a-2]=(num[0+a]<<2)|(num[1+a]>>6);
    //6（低）+4（高)
    time[1+a-2]=((num[1+a]&0x3F)<<4)|((num[2+a]>>4)&0x0F);

    for(i=0;i<10;i++)
    {
        printf("%d,",time[i]);        
    }
    printf("\n");
    //上面是时间戳不看
    //下面进行imu的数据解析,一共是180个 十组，每组18个
    // unsigned char imu[]={ 0x00, 0x51, 0x01, 0xE1, 0x20, 0x79, 0xFF, 0xBB, 0xFF, 0xE1,
    //             0x00, 0x07, 0xF9, 0x76, 0x04, 0x3B, 0xF4, 0xCE, 0x00, 0x4B,
    //             0x01, 0xE6, 0x20, 0x79, 0xFF, 0xBB, 0xFF, 0xE2, 0x00, 0x06,
    //             0xF9, 0x87, 0x04, 0x3B, 0xF4, 0xC8, 0x00, 0x4B, 0x01, 0xE9,
    //             0x20, 0x79, 0xFF, 0xBE, 0xFF, 0xE4, 0x00, 0x05, 0xF9, 0x83,
    //             0x04, 0x25, 0xF4, 0xBC, 0x00, 0x4C, 0x01, 0xE3, 0x20, 0x78,
    //             0xFF, 0xBE, 0xFF, 0xE5, 0x00, 0x04, 0xF9, 0x46, 0x04, 0x3D,
    //             0xF4, 0xCF, 0x00, 0x4D, 0x01, 0xE6, 0x20, 0x7C, 0xFF, 0xBB,
    //             0xFF, 0xE3, 0x00, 0x07, 0xF9, 0x70, 0x04, 0x3D, 0xF4, 0xC6,
    //             0x00, 0x4F, 0x01, 0xEA, 0x20, 0x78, 0xFF, 0xBA, 0xFF, 0xE2,
    //             0x00, 0x06, 0xF9, 0x66, 0x04, 0x47, 0xF4, 0xCB, 0x00, 0x4B,
    //             0x01, 0xEB, 0x20, 0x78, 0xFF, 0xB9, 0xFF, 0xE2, 0x00, 0x08,
    //             0xF9, 0x6E, 0x04, 0x39, 0xF4, 0xBC, 0x00, 0x48, 0x01, 0xED,
    //             0x20, 0x7C, 0xFF, 0xB5, 0xFF, 0xE1, 0x00, 0x09, 0xF9, 0x64,
    //             0x04, 0x42, 0xF4, 0xD5, 0x00, 0x46, 0x01, 0xE7, 0x20, 0x7F,
    //             0xFF, 0xB6, 0xFF, 0xE4, 0x00, 0x08, 0xF9, 0x4B, 0x04, 0x2F,
    //             0xF4, 0xFC, 0x00, 0x43, 0x01, 0xE1, 0x20, 0x76, 0xFF, 0xB7,
    //             0xFF, 0xE4, 0x00, 0x06, 0xF9, 0x5D, 0x04, 0x30, 0xF4, 0xDF};
    uint8_t imu[]={  0x00, 0x0F, 0xFF, 0xAE, 0x20, 0x62, 0xFF, 0xEF, 0x00,
0x13, 0xFF, 0xE2, 0xF5, 0xF0, 0x0F, 0xD0, 0xD6, 0x8D, 0x00,
0x0F, 0xFF, 0xAA, 0x20, 0x60, 0xFF, 0xF1, 0x00, 0x0F, 0xFF,
0xDD, 0xF5, 0xF0, 0x0F, 0xC5, 0xD6, 0x9F, 0x00, 0x17, 0xFF,
0xAA, 0x20, 0x5F, 0xFF, 0xF0, 0x00, 0x12, 0xFF, 0xDD, 0xF5,
0xF2, 0x0F, 0xB6, 0xD6, 0xA0, 0x00, 0x0F, 0xFF, 0xAF, 0x20,
0x61, 0xFF, 0xF2, 0x00, 0x16, 0xFF, 0xE2, 0xF5, 0xE1, 0x0F,
0xEF, 0xD6, 0xB4, 0x00, 0x0A, 0xFF, 0xB1, 0x20, 0x60, 0xFF,
0xF8, 0x00, 0x13, 0xFF, 0xE4, 0xF6, 0x10, 0x0F, 0xD0, 0xD6,
0x7B, 0x00, 0x14, 0xFF, 0xA7, 0x20, 0x59, 0xFF, 0xF6, 0x00,
0x0D, 0xFF, 0xE3, 0xF5, 0xE3, 0x0F, 0xCD, 0xD6, 0x7C, 0x00,
0x11, 0xFF, 0xAF, 0x20, 0x5B, 0xFF, 0xF3, 0x00, 0x13, 0xFF,
0xDC, 0xF5, 0xEF, 0x0F, 0xD2, 0xD6, 0x7D, 0x00, 0x10, 0xFF,
0x9E, 0x20, 0x5C, 0xFF, 0xF7, 0x00, 0x0F, 0xFF, 0xE3, 0xF6,
0x02, 0x0F, 0xE5, 0xD6, 0x66, 0x00, 0x17, 0xFF, 0xB0, 0x20,
0x61, 0xFF, 0xF4, 0x00, 0x10, 0xFF, 0xE1, 0xF6, 0x0C, 0x0F,
0xC1, 0xD6, 0x61, 0x00, 0x11, 0xFF, 0xAA, 0x20, 0x65, 0xFF,
0xEF, 0x00, 0x10, 0xFF, 0xDE, 0xF5, 0xE0, 0x0F, 0xD5, 0xD6, 0x98
};


    int16_t imu_p[10][9]={0};
    int k=0,m=0;
    for(k=0;k<10;k++)
    {
        //imu
        for(m=0;m<6;m++)
        {
            imu_p[k][m]=(imu[k*18+2*m]<<8)+imu[k*18+2*m+1];
            printf("%d,",imu_p[k][m]);
        }
        //磁力计
        for(m=6;m<9;m++)
        {
            imu_p[k][m]=(imu[k*18+2*m]<<8)+imu[k*18+2*m+1];
            printf("%d,",imu_p[k][m]);
        }
        printf("\n");
    }
    // for(k=0;k<10;k++)
    // {
    //     //imu
    //     for(m=0;m<6;m++)
    //     {
    //         imu_p[k][m]=imu[k*18+2*m]<<8+imu[k*18+2*m+1];
    //         printf("%d,",imu_p[k][m]);
    //     }
    //     //磁力计
    //     for(m=6;m<9;m++)
    //     {
    //         imu_p[k][m]=imu[k*18+2*m]<<8+imu[k*18+2*m+1];
    //         printf("%d,",imu_p[k][m]);
    //     }
    //     printf("\n");
    // }
    


    //RSS解析的数据
//     uint8_t RSS[]={ 
//         0x36, 0x85, 0x9A, 0x6F, 0xC2, 0x7C, 0x96, 0x42, 0x66, 0xC6, 0x81, 0xB8, 0xF1, 0x81, 0x7F, 0xFB, 0xC1, 0x7A, 0xAE
// };
    uint8_t RSS[]={ 
            0x36, 0x05, 0xFC, 0x6F, 0x42, 0x5C, 0x96, 0xC2, 0x88, 0xC7, 0x01, 0xF9, 0xF1, 0x81, 0x96, 0xFB, 0xC1, 0x8E
};
    int idex[6];
    int fft_out[6];
    for(i=0;i<6;i++)
    {
        idex[i]=(RSS[3*i+0]<<2)|(RSS[3*i+1]>>6);
        fft_out[i]=((RSS[3*i+1]&0x3F)<<8)|RSS[3*i+2];
        printf("idex[%d],%d,fft_out[%d],%d\n",i,idex[i],i,fft_out[i]);
    }
    return 0;
}